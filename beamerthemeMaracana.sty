% =================================================================
% Maracana beamer theme
%
% beamerthemeMaracana.sty
%
% This file is to be used as layout for research presentations
% 
% Author:
% Michel Tosin
% michel.tosin@uerj.br

% last update: Nov 03, 2021
% =================================================================

\RequirePackage{ifthen}
\RequirePackage[scaled=.75]{helvet}
\RequirePackage{color,tikz}
\RequirePackage{varwidth}
\RequirePackage{mathtools}

\mode<presentation>

\renewcommand{\logo}[1]{%      % variable for logo image
  \newcommand{\logofile}{#1}}

\newlength{\pwidth} % auxiliary variable for picture width
\newlength{\fwidth} % auxiliary variable for picture width

% ---------------------------------------------------------------------------------------
% Color/font
% ---------------------------------------------------------------------------------------
\definecolor{uerj_blue}{rgb}{0, 0.45, 0.81}     
\definecolor{uerj_gold}{rgb}{0.68, 0.52, 0.12} 

\setbeamercolor*{palette primary}{fg=white,bg=uerj_blue}
\setbeamercolor*{palette secondary}{fg=white,bg=uerj_gold}

\setbeamercolor*{title}{fg=red}
\setbeamercolor*{author}{fg=black}
\setbeamercolor*{institute}{fg=black}
\setbeamercolor*{date}{fg=purple}

\setbeamercolor*{frametitle}{parent=palette primary}
\setbeamercolor*{framelogo}{bg=white}

\setbeamercolor*{section number projected}{parent=palette primary}
\setbeamercolor*{sections in toc}{parent=palette secondary}
\setbeamercolor*{section page}{parent=palette primary}

\setbeamercolor*{block title}{use=alerted text,parent=palette primary}
\setbeamercolor*{block body}{use=block title alerted,parent=palette secondary}

\setbeamerfont*{title}{size=\huge,series=\bf}
\setbeamerfont*{author}{size=\normalsize,series=\bf}
\setbeamerfont*{institute}{size=\normalsize}
\setbeamerfont*{date}{size=\Large,series=\bf}

\setbeamerfont*{frametitle}{size=\LARGE,series=\bf}
\setbeamerfont*{footline}{size=\footnotesize,series=\bf}

\setbeamerfont*{section number projected}{size=\Large,series=\bf}
\setbeamerfont*{sections in toc}{size=\Large,series=\bf}
\setbeamerfont*{section page}{size=\Huge,series=\bf}

\setbeamerfont*{block title}{series=\bf}
% ---------------------------------------------------------------------------------------

% ---------------------------------------------------------------------------------------
% Headline/footline
% ---------------------------------------------------------------------------------------
\setbeamertemplate{headline}{%
  \ifnum\c@framenumber=1%
     \leavevmode
     \settowidth{\pwidth}{\includegraphics[height=1.8cm]{\logofile}}
	\vskip4mm
	\begin{beamercolorbox}[wd=\paperwidth,ht=9.95mm]{frametitle}
			\begin{tikzpicture}[remember picture, overlay]
       		\hspace{2.5mm}
			\draw[line width=0.35,color=black,save path=\ppath,fill=white,
				  rounded corners=3] (0,-0.41) rectangle (\pwidth,1.39);
   			\clip[use path=\ppath];
    		\draw (0.5\pwidth,0.49) node {\includegraphics[height=1.8cm]{\logofile}};
        \end{tikzpicture}
	\end{beamercolorbox} 
  \vspace*{-39.69156pt}
  \fi 
}

\addtobeamertemplate{frametitle}{\vspace*{-1mm}}{
\vspace{-4.95mm} 
\settowidth{\pwidth}{\includegraphics[height=1cm]{\logofile}}
\setlength{\fwidth}{\paperwidth-\pwidth}
\hspace{-6.3mm} 
\begin{tikzpicture}[remember picture, overlay]
    \draw[line width=0.25,color=black,fill=white,save path=\ppath] (\fwidth,-0.012) rectangle (\paperwidth,1);
    \clip[use path=\ppath];
    \draw (\fwidth+0.5\pwidth,0.5) node {\includegraphics[height=1cm]{\logofile}};
\end{tikzpicture}
}

\setbeamertemplate{footline}{%
  \leavevmode%
  \hbox{%
      \begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,center]{palette primary}%
      \ifx  \insertshortauthor\@empty
      \else \usebeamerfont{footline} \insertshortauthor
      \fi
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,center]{palette secondary}%
      \ifx  \insertshorttitle\@empty
      \else \usebeamerfont{footline} \insertshorttitle 
      \fi
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,center]{palette primary}%
      \ifx  \insertshortinstitute\@empty
      \else \usebeamerfont{footline} \insertshortinstitute ~~ 
      		\insertframenumber/\inserttotalframenumber
      \fi
      \end{beamercolorbox}}
}
% ---------------------------------------------------------------------------------------

% ---------------------------------------------------------------------------------------
% Titlepage elements
% ---------------------------------------------------------------------------------------
\setbeamertemplate{title page}{    
  \vskip10mm
  \vbox{}
  \vfill
  \begingroup
    \centering
    \begin{beamercolorbox}[sep=8pt,center]{title}
      \usebeamerfont{title}\inserttitle\par
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[sep=8pt,center]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}
  \endgroup
  \vfill
}
% ---------------------------------------------------------------------------------------

% ---------------------------------------------------------------------------------------
% Table of contents
% ---------------------------------------------------------------------------------------
\setbeamertemplate{section in toc}{
\leavevmode\leftskip=4.75ex%
  \llap{%
    \usebeamerfont*{section number projected}%
    \usebeamercolor[bg]{section number projected}%
    \vrule width2.25ex height1.85ex depth.5ex%
    \hskip-2.25ex%
    \hbox to2.25ex{\hfil\color{fg}\inserttocsectionnumber\hfil}}%
  \kern1.25ex
    \usebeamerfont*{sections in toc}%
    \usebeamercolor[bg]{sections in toc}%
    \inserttocsection\par
}
% ---------------------------------------------------------------------------------------

% ---------------------------------------------------------------------------------------
% Section page
% ---------------------------------------------------------------------------------------
\AtBeginSection[]{
  \begin{frame}{~}
  \centering
  \fcolorbox{white}{white}{
  \begin{beamercolorbox}[rounded=true,sep=12pt,wd=\dimexpr0.75\textwidth,center]{section page}
    	\usebeamerfont{section page}\insertsectionhead\par
  	\end{beamercolorbox} }
  \end{frame}
}
% ---------------------------------------------------------------------------------------

% ---------------------------------------------------------------------------------------
% Blocks
% ---------------------------------------------------------------------------------------
\setbeamertemplate{blocks}[rounded][shadow=true]
% ---------------------------------------------------------------------------------------

% disable navigation symbols
\setbeamertemplate{navigation symbols}{}

% set margins in the beamer frame
\setbeamersize{text margin left=5mm,text margin right=5mm}


\mode
<all>